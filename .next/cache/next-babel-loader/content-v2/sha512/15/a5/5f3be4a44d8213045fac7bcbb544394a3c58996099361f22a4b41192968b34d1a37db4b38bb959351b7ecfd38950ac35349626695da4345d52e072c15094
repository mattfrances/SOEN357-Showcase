{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/_app.jsx\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport ExploreTweetsContext from \"../context/ExploreTweetsContext\";\nimport HomeTweetsContext from \"../context/HomeTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport \"../styles/global.css\";\nimport \"../styles/reset.css\";\nvar db = firebase.firestore();\n\nfunction MyApp(_ref) {\n  _s();\n\n  var Component = _ref.Component,\n      pageProps = _ref.pageProps;\n  var Router = useRouter();\n  var protectedRoutes = [\"/home\", \"/bookmarks\"];\n\n  var _useState = useState(null),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(null),\n      homeTweetsContext = _useState2[0],\n      setHomeTweetsContext = _useState2[1];\n\n  var _useState3 = useState(null),\n      exploreTweetsContext = _useState3[0],\n      setExploreTweetsContext = _useState3[1];\n\n  var _useState4 = useState(null),\n      bookmarksTweetsContext = _useState4[0],\n      setBookmarksTweetsContext = _useState4[1];\n\n  useEffect(function () {\n    function getCurrentUser(_x) {\n      return _getCurrentUser.apply(this, arguments);\n    }\n\n    function _getCurrentUser() {\n      _getCurrentUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(userID) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return db.collection(\"users\").doc(userID).get();\n\n              case 2:\n                user = _context.sent;\n                setUser(_objectSpread(_objectSpread({}, user.data()), {}, {\n                  uid: userID\n                }));\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getCurrentUser.apply(this, arguments);\n    }\n\n    firebase.auth().onAuthStateChanged(function (loggedUser) {\n      if (!loggedUser) {\n        if (protectedRoutes.includes(Router.pathname)) Router.push(\"/\");\n        setUser(null);\n      } else {\n        getCurrentUser(loggedUser.uid);\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"title\", {\n      children: \"Tweeter\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n      value: {\n        user: user,\n        setUser: setUser\n      },\n      children: /*#__PURE__*/_jsxDEV(HomeTweetsContext.Provider, {\n        value: {\n          homeTweetsContext: homeTweetsContext,\n          setHomeTweetsContext: setHomeTweetsContext\n        },\n        children: /*#__PURE__*/_jsxDEV(ExploreTweetsContext.Provider, {\n          value: {\n            exploreTweetsContext: exploreTweetsContext,\n            setExploreTweetsContext: setExploreTweetsContext\n          },\n          children: /*#__PURE__*/_jsxDEV(BookmarksTweetsContext.Provider, {\n            value: {\n              bookmarksTweetsContext: bookmarksTweetsContext,\n              setBookmarksTweetsContext: setBookmarksTweetsContext\n            },\n            children: /*#__PURE__*/_jsxDEV(Component, _objectSpread({}, pageProps), void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(MyApp, \"riOQlI//pambTByo1qVCVqgAwD0=\", false, function () {\n  return [useRouter];\n});\n\n_c = MyApp;\nexport default MyApp;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyApp\");","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/_app.jsx"],"names":["useRouter","useEffect","useState","BookmarksTweetsContext","ExploreTweetsContext","HomeTweetsContext","UserContext","firebase","db","firestore","MyApp","Component","pageProps","Router","protectedRoutes","user","setUser","homeTweetsContext","setHomeTweetsContext","exploreTweetsContext","setExploreTweetsContext","bookmarksTweetsContext","setBookmarksTweetsContext","getCurrentUser","userID","collection","doc","get","data","uid","auth","onAuthStateChanged","loggedUser","includes","pathname","push"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport ExploreTweetsContext from \"../context/ExploreTweetsContext\";\nimport HomeTweetsContext from \"../context/HomeTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport \"../styles/global.css\";\nimport \"../styles/reset.css\";\n\nconst db = firebase.firestore();\n\nfunction MyApp({ Component, pageProps }) {\n  const Router = useRouter();\n  const protectedRoutes = [\"/home\", \"/bookmarks\"];\n\n  const [user, setUser] = useState(null);\n  const [homeTweetsContext, setHomeTweetsContext] = useState(null);\n  const [exploreTweetsContext, setExploreTweetsContext] = useState(null);\n  const [bookmarksTweetsContext, setBookmarksTweetsContext] = useState(null);\n\n  useEffect(() => {\n    async function getCurrentUser(userID) {\n      const user = await db.collection(\"users\").doc(userID).get();\n      setUser({ ...user.data(), uid: userID });\n    }\n\n    firebase.auth().onAuthStateChanged((loggedUser) => {\n      if (!loggedUser) {\n        if (protectedRoutes.includes(Router.pathname)) Router.push(\"/\");\n        setUser(null);\n      } else {\n        getCurrentUser(loggedUser.uid);\n      }\n    });\n  }, []);\n\n  return (\n    <>\n      <title>Tweeter</title>\n      <UserContext.Provider value={{ user, setUser }}>\n        <HomeTweetsContext.Provider\n          value={{ homeTweetsContext, setHomeTweetsContext }}>\n          <ExploreTweetsContext.Provider\n            value={{ exploreTweetsContext, setExploreTweetsContext }}>\n            <BookmarksTweetsContext.Provider\n              value={{ bookmarksTweetsContext, setBookmarksTweetsContext }}>\n              <Component {...pageProps} />\n            </BookmarksTweetsContext.Provider>\n          </ExploreTweetsContext.Provider>\n        </HomeTweetsContext.Provider>\n      </UserContext.Provider>\n    </>\n  );\n}\n\nexport default MyApp;\n"]},"metadata":{},"sourceType":"module"}