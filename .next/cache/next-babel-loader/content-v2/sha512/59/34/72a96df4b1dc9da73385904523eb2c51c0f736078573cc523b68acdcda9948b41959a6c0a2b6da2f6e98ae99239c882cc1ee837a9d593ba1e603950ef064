{"ast":null,"code":"import _regeneratorRuntime from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport UserContext from \"../context/UserContext\";\nimport { fetchUser, fetchUserFollowers } from \"../services/FetchData\";\nexport function useFollowers(userId, authUserID) {\n  _s();\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      followers = _React$useState2[0],\n      setFollowers = _React$useState2[1];\n\n  var _React$useState3 = React.useState(true),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isFollowersLoading = _React$useState4[0],\n      setIsFollowersLoading = _React$useState4[1];\n\n  var getFollowers = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var data, followersSnapShot, i;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              data = [];\n              setIsFollowersLoading(true);\n\n              if (!user) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 5;\n              return fetchUserFollowers(userId, authUserID);\n\n            case 5:\n              followersSnapShot = _context.sent;\n              i = 0;\n\n            case 7:\n              if (!(i < followersSnapShot.size)) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.t0 = data;\n              _context.next = 11;\n              return fetchUser({\n                userID: followersSnapShot.docs[i].data().followerID\n              });\n\n            case 11:\n              _context.t1 = _context.sent;\n\n              _context.t0.push.call(_context.t0, _context.t1);\n\n            case 13:\n              i++;\n              _context.next = 7;\n              break;\n\n            case 16:\n              setFollowers(data);\n              setIsFollowersLoading(false);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getFollowers() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return {\n    followers: followers,\n    isFollowersLoading: isFollowersLoading,\n    getFollowers: getFollowers\n  };\n}\n\n_s(useFollowers, \"sqqYPxkpnmPuy2oAAN+3rI9wdP8=\");","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/hooks/useFollowers.js"],"names":["React","useContext","UserContext","fetchUser","fetchUserFollowers","useFollowers","userId","authUserID","user","useState","followers","setFollowers","isFollowersLoading","setIsFollowersLoading","getFollowers","data","followersSnapShot","i","size","userID","docs","followerID","push"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,SAASC,SAAT,EAAoBC,kBAApB,QAA8C,uBAA9C;AAEA,OAAO,SAASC,YAAT,CAAsBC,MAAtB,EAA8BC,UAA9B,EAA0C;AAAA;;AAAA,oBAC9BN,UAAU,CAACC,WAAD,CADoB;AAAA,MACvCM,IADuC,eACvCA,IADuC;;AAAA,wBAEbR,KAAK,CAACS,QAAN,CAAe,EAAf,CAFa;AAAA;AAAA,MAExCC,SAFwC;AAAA,MAE7BC,YAF6B;;AAAA,yBAGKX,KAAK,CAACS,QAAN,CAAe,IAAf,CAHL;AAAA;AAAA,MAGxCG,kBAHwC;AAAA,MAGpBC,qBAHoB;;AAK/C,MAAMC,YAAY;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AACbC,cAAAA,IADa,GACN,EADM;AAEnBF,cAAAA,qBAAqB,CAAC,IAAD,CAArB;;AAFmB,mBAGfL,IAHe;AAAA;AAAA;AAAA;;AAAA;AAAA,qBAIeJ,kBAAkB,CAACE,MAAD,EAASC,UAAT,CAJjC;;AAAA;AAIXS,cAAAA,iBAJW;AAKRC,cAAAA,CALQ,GAKJ,CALI;;AAAA;AAAA,oBAKDA,CAAC,GAAGD,iBAAiB,CAACE,IALrB;AAAA;AAAA;AAAA;;AAAA,4BAMfH,IANe;AAAA;AAAA,qBAOPZ,SAAS,CAAC;AACdgB,gBAAAA,MAAM,EAAEH,iBAAiB,CAACI,IAAlB,CAAuBH,CAAvB,EAA0BF,IAA1B,GAAiCM;AAD3B,eAAD,CAPF;;AAAA;AAAA;;AAAA,0BAMVC,IANU;;AAAA;AAK2BL,cAAAA,CAAC,EAL5B;AAAA;AAAA;;AAAA;AAanBN,cAAAA,YAAY,CAACI,IAAD,CAAZ;AACAF,cAAAA,qBAAqB,CAAC,KAAD,CAArB;;AAdmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAiBA,SAAO;AAAEJ,IAAAA,SAAS,EAATA,SAAF;AAAaE,IAAAA,kBAAkB,EAAlBA,kBAAb;AAAiCE,IAAAA,YAAY,EAAZA;AAAjC,GAAP;AACD;;GAvBeT,Y","sourcesContent":["import React, { useContext } from \"react\";\nimport UserContext from \"../context/UserContext\";\nimport { fetchUser, fetchUserFollowers } from \"../services/FetchData\";\n\nexport function useFollowers(userId, authUserID) {\n  const { user } = useContext(UserContext);\n  const [followers, setFollowers] = React.useState([]);\n  const [isFollowersLoading, setIsFollowersLoading] = React.useState(true);\n\n  const getFollowers = async () => {\n    const data = [];\n    setIsFollowersLoading(true);\n    if (user) {\n      const followersSnapShot = await fetchUserFollowers(userId, authUserID);\n      for (let i = 0; i < followersSnapShot.size; i++) {\n        data.push(\n          await fetchUser({\n            userID: followersSnapShot.docs[i].data().followerID,\n          })\n        );\n      }\n    }\n    setFollowers(data);\n    setIsFollowersLoading(false);\n  };\n\n  return { followers, isFollowersLoading, getFollowers };\n}\n"]},"metadata":{},"sourceType":"module"}