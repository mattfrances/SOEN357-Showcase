{"ast":null,"code":"import _regeneratorRuntime from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from \"../firebase/init\";\n\nfunction handleSignUp(_x, _x2, _x3, _x4) {\n  return _handleSignUp.apply(this, arguments);\n}\n\nfunction _handleSignUp() {\n  _handleSignUp = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(email, password, username, name) {\n    var _yield$firebase$auth$, user;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return firebase.auth().createUserWithEmailAndPassword(email, password);\n\n          case 3:\n            _yield$firebase$auth$ = _context.sent;\n            user = _yield$firebase$auth$.user;\n            _context.next = 7;\n            return firebase.firestore().collection(\"users\").doc(user.uid).set({\n              username: username,\n              email: user.email,\n              profilePicture: \"https://firebasestorage.googleapis.com/v0/b/tweeter-45929.appspot.com/o/defaultAvatar.jpg?alt=media&token=072d3268-84f4-4016-b0f7-d440930347f2\",\n              name: name,\n              bio: null\n            });\n\n          case 7:\n            _context.next = 9;\n            return firebase.firestore().collection(\"connections\").add({\n              followerID: user.uid,\n              followeeID: user.uid\n            });\n\n          case 9:\n            window.location.replace(\"/home\");\n            return _context.abrupt(\"return\", user);\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n            return _context.abrupt(\"return\", _context.t0);\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 13]]);\n  }));\n  return _handleSignUp.apply(this, arguments);\n}\n\nfunction handleSignIn(_x5, _x6) {\n  return _handleSignIn.apply(this, arguments);\n}\n\nfunction _handleSignIn() {\n  _handleSignIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n    var user;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return firebase.auth().signInWithEmailAndPassword(email, password);\n\n          case 3:\n            user = _context2.sent;\n            window.location.replace(\"/home\");\n            _context2.next = 11;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.error(_context2.t0);\n            return _context2.abrupt(\"return\", _context2.t0);\n\n          case 11:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n  return _handleSignIn.apply(this, arguments);\n}\n\nfunction handleSignOut() {\n  return _handleSignOut.apply(this, arguments);\n}\n\nfunction _handleSignOut() {\n  _handleSignOut = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return firebase.auth().signOut();\n\n          case 3:\n            window.location.replace(\"/\");\n            return _context3.abrupt(\"return\", true);\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.error(_context3.t0);\n            return _context3.abrupt(\"return\", _context3.t0);\n\n          case 11:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n  return _handleSignOut.apply(this, arguments);\n}\n\nexport { handleSignIn, handleSignUp, handleSignOut };","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/services/Authentication.js"],"names":["firebase","handleSignUp","email","password","username","name","auth","createUserWithEmailAndPassword","user","firestore","collection","doc","uid","set","profilePicture","bio","add","followerID","followeeID","window","location","replace","console","error","handleSignIn","signInWithEmailAndPassword","handleSignOut","signOut"],"mappings":";;AAAA,OAAOA,QAAP,MAAqB,kBAArB;;SAEeC,Y;;;;;2EAAf,iBAA4BC,KAA5B,EAAmCC,QAAnC,EAA6CC,QAA7C,EAAuDC,IAAvD;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAE2BL,QAAQ,CAC5BM,IADoB,GAEpBC,8BAFoB,CAEWL,KAFX,EAEkBC,QAFlB,CAF3B;;AAAA;AAAA;AAEYK,YAAAA,IAFZ,yBAEYA,IAFZ;AAAA;AAAA,mBAKUR,QAAQ,CAACS,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyCC,GAAzC,CAA6CH,IAAI,CAACI,GAAlD,EAAuDC,GAAvD,CAA2D;AAC/DT,cAAAA,QAAQ,EAARA,QAD+D;AAE/DF,cAAAA,KAAK,EAAEM,IAAI,CAACN,KAFmD;AAG/DY,cAAAA,cAAc,EACZ,gJAJ6D;AAK/DT,cAAAA,IAAI,EAAJA,IAL+D;AAM/DU,cAAAA,GAAG,EAAE;AAN0D,aAA3D,CALV;;AAAA;AAAA;AAAA,mBAcUf,QAAQ,CAACS,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+CM,GAA/C,CAAmD;AACvDC,cAAAA,UAAU,EAAET,IAAI,CAACI,GADsC;AAEvDM,cAAAA,UAAU,EAAEV,IAAI,CAACI;AAFsC,aAAnD,CAdV;;AAAA;AAmBIO,YAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,OAAxB;AAnBJ,6CAoBWb,IApBX;;AAAA;AAAA;AAAA;AAsBIc,YAAAA,OAAO,CAACC,KAAR;AAtBJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SA2BeC,Y;;;;;2EAAf,kBAA4BtB,KAA5B,EAAmCC,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEuBH,QAAQ,CACxBM,IADgB,GAEhBmB,0BAFgB,CAEWvB,KAFX,EAEkBC,QAFlB,CAFvB;;AAAA;AAEUK,YAAAA,IAFV;AAKIW,YAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,OAAxB;AALJ;AAAA;;AAAA;AAAA;AAAA;AAOIC,YAAAA,OAAO,CAACC,KAAR;AAPJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAYeG,a;;;;;4EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAEU1B,QAAQ,CAACM,IAAT,GAAgBqB,OAAhB,EAFV;;AAAA;AAGIR,YAAAA,MAAM,CAACC,QAAP,CAAgBC,OAAhB,CAAwB,GAAxB;AAHJ,8CAIW,IAJX;;AAAA;AAAA;AAAA;AAMIC,YAAAA,OAAO,CAACC,KAAR;AANJ;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAWA,SAASC,YAAT,EAAuBvB,YAAvB,EAAqCyB,aAArC","sourcesContent":["import firebase from \"../firebase/init\";\n\nasync function handleSignUp(email, password, username, name) {\n  try {\n    const { user } = await firebase\n      .auth()\n      .createUserWithEmailAndPassword(email, password);\n    await firebase.firestore().collection(\"users\").doc(user.uid).set({\n      username,\n      email: user.email,\n      profilePicture:\n        \"https://firebasestorage.googleapis.com/v0/b/tweeter-45929.appspot.com/o/defaultAvatar.jpg?alt=media&token=072d3268-84f4-4016-b0f7-d440930347f2\",\n      name,\n      bio: null,\n    });\n\n    await firebase.firestore().collection(\"connections\").add({\n      followerID: user.uid,\n      followeeID: user.uid,\n    });\n\n    window.location.replace(\"/home\");\n    return user;\n  } catch (error) {\n    console.error(error);\n    return error;\n  }\n}\n\nasync function handleSignIn(email, password) {\n  try {\n    const user = await firebase\n      .auth()\n      .signInWithEmailAndPassword(email, password);\n    window.location.replace(\"/home\");\n  } catch (error) {\n    console.error(error);\n    return error;\n  }\n}\n\nasync function handleSignOut() {\n  try {\n    await firebase.auth().signOut();\n    window.location.replace(\"/\");\n    return true;\n  } catch (error) {\n    console.error(error);\n\n    return error;\n  }\n}\nexport { handleSignIn, handleSignUp, handleSignOut };\n"]},"metadata":{},"sourceType":"module"}