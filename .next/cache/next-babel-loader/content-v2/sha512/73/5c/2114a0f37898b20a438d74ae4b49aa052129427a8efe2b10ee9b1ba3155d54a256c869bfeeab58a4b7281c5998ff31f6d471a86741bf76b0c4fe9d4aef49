{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/bookmarks.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Filters from \"../components/Filters/Filters\";\nimport Post from \"../components/Post/Post\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport Layout from \"../layouts\";\nimport { fetchTweet } from \"../services/FetchData\";\n\nvar Bookmarks = function Bookmarks() {\n  _s();\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useState = useState([]),\n      bookmarkTweets = _useState[0],\n      setBookmarkTweets = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      isEmpty = _useState3[0],\n      setIsEmpty = _useState3[1];\n\n  var _useContext2 = useContext(BookmarksTweetsContext),\n      bookmarksTweetsContext = _useContext2.bookmarksTweetsContext,\n      setBookmarksTweetsContext = _useContext2.setBookmarksTweetsContext;\n\n  useEffect(function () {\n    if (user) {\n      if (!bookmarksTweetsContext) {\n        var getSavedTweets = /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n            var localBMTweets, savesSnapShot, i, tweet;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    localBMTweets = [];\n                    _context.next = 3;\n                    return firebase.firestore().collection(\"saves\").where(\"userID\", \"==\", user.uid).get();\n\n                  case 3:\n                    savesSnapShot = _context.sent;\n\n                    if (!savesSnapShot.empty) {\n                      _context.next = 10;\n                      break;\n                    }\n\n                    setIsEmpty(true);\n                    setBookmarkTweets([]);\n                    setIsLoading(false);\n                    _context.next = 23;\n                    break;\n\n                  case 10:\n                    i = 0;\n\n                  case 11:\n                    if (!(i < savesSnapShot.size)) {\n                      _context.next = 19;\n                      break;\n                    }\n\n                    _context.next = 14;\n                    return fetchTweet(savesSnapShot.docs[i].data().tweetID);\n\n                  case 14:\n                    tweet = _context.sent;\n                    localBMTweets.push(tweet);\n\n                  case 16:\n                    i++;\n                    _context.next = 11;\n                    break;\n\n                  case 19:\n                    setBookmarkTweets(localBMTweets);\n                    setBookmarksTweetsContext(localBMTweets);\n                    setIsEmpty(false);\n                    setIsLoading(false);\n\n                  case 23:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function getSavedTweets() {\n            return _ref.apply(this, arguments);\n          };\n        }();\n\n        getSavedTweets(user.uid);\n      } else {\n        setBookmarkTweets(bookmarksTweetsContext);\n        setIsEmpty(false);\n        setIsLoading(false);\n      }\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Bookmarks | Tweeter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-4 sm:mx-12 md:mx-24 lg:mx-24 mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col lg:grid lg:grid-cols-3 lg:col-gap-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hidden lg:block lg:col-span-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-5\",\n              children: /*#__PURE__*/_jsxDEV(Filters, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2\",\n            children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center\",\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, _this), isEmpty ? /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"You have no Saved Tweets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, _this) : bookmarkTweets.map(function (tweet) {\n              return /*#__PURE__*/_jsxDEV(Link, {\n                href: \"\".concat(tweet.author.username, \"/status/\").concat(tweet.id),\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-5\",\n                  children: /*#__PURE__*/_jsxDEV(Post, {\n                    tweet: tweet\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 23\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 19\n              }, _this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Bookmarks, \"nmL0aBtALci7p4TMVdYEJlbCinU=\");\n\n_c = Bookmarks;\nexport default Bookmarks;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bookmarks\");","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/bookmarks.jsx"],"names":["CircularProgress","Head","Link","useContext","useEffect","useState","Filters","Post","BookmarksTweetsContext","UserContext","firebase","Layout","fetchTweet","Bookmarks","user","bookmarkTweets","setBookmarkTweets","loading","setIsLoading","isEmpty","setIsEmpty","bookmarksTweetsContext","setBookmarksTweetsContext","getSavedTweets","localBMTweets","firestore","collection","where","uid","get","savesSnapShot","empty","i","size","docs","data","tweetID","tweet","push","map","author","username","id"],"mappings":"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","sourcesContent":["import CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Filters from \"../components/Filters/Filters\";\nimport Post from \"../components/Post/Post\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport Layout from \"../layouts\";\nimport { fetchTweet } from \"../services/FetchData\";\n\nconst Bookmarks = () => {\n  const { user } = useContext(UserContext);\n  const [bookmarkTweets, setBookmarkTweets] = useState([]);\n  const [loading, setIsLoading] = useState(true);\n  const [isEmpty, setIsEmpty] = useState(false);\n  const { bookmarksTweetsContext, setBookmarksTweetsContext } = useContext(\n    BookmarksTweetsContext\n  );\n\n  useEffect(() => {\n    if (user) {\n      if (!bookmarksTweetsContext) {\n        async function getSavedTweets() {\n          const localBMTweets = [];\n          const savesSnapShot = await firebase\n            .firestore()\n            .collection(\"saves\")\n            .where(\"userID\", \"==\", user.uid)\n            .get();\n\n          if (savesSnapShot.empty) {\n            setIsEmpty(true);\n            setBookmarkTweets([]);\n            setIsLoading(false);\n          } else {\n            for (let i = 0; i < savesSnapShot.size; i++) {\n              const tweet = await fetchTweet(\n                savesSnapShot.docs[i].data().tweetID\n              );\n              localBMTweets.push(tweet);\n            }\n            setBookmarkTweets(localBMTweets);\n            setBookmarksTweetsContext(localBMTweets);\n            setIsEmpty(false);\n            setIsLoading(false);\n          }\n        }\n        getSavedTweets(user.uid);\n      } else {\n        setBookmarkTweets(bookmarksTweetsContext);\n        setIsEmpty(false);\n        setIsLoading(false);\n      }\n    }\n  }, [user]);\n\n  return (\n    <div>\n      <Head>\n        <title>Bookmarks | Tweeter</title>\n      </Head>\n      <Layout>\n        <div className=\"mx-4 sm:mx-12 md:mx-24 lg:mx-24 mt-5\">\n          <div className=\"flex flex-col lg:grid lg:grid-cols-3 lg:col-gap-5\">\n            <div className=\"hidden lg:block lg:col-span-1\">\n              <div className=\"mb-5\">\n                <Filters />\n              </div>\n            </div>\n            <div className=\"lg:col-span-2\">\n              {loading && (\n                <div className=\"flex justify-center\">\n                  <CircularProgress />\n                </div>\n              )}\n              {isEmpty ? (\n                <h1>You have no Saved Tweets</h1>\n              ) : (\n                bookmarkTweets.map((tweet) => (\n                  <Link href={`${tweet.author.username}/status/${tweet.id}`}>\n                    <div className=\"mb-5\">\n                      <Post tweet={tweet} />\n                    </div>\n                  </Link>\n                ))\n              )}\n            </div>\n          </div>\n        </div>\n      </Layout>\n    </div>\n  );\n};\n\nexport default Bookmarks;\n"]},"metadata":{},"sourceType":"module"}