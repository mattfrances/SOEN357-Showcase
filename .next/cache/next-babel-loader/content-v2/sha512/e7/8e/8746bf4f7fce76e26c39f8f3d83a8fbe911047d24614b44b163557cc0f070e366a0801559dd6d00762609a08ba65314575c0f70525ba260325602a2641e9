{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/bookmarks.jsx\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Filters from \"../components/Filters/Filters\";\nimport Post from \"../components/Post/Post\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport Layout from \"../layouts\";\nimport { fetchTweet } from \"../services/FetchData\";\n\nconst Bookmarks = () => {\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    0: bookmarkTweets,\n    1: setBookmarkTweets\n  } = useState([]);\n  const {\n    0: loading,\n    1: setIsLoading\n  } = useState(true);\n  const {\n    0: isEmpty,\n    1: setIsEmpty\n  } = useState(false);\n  const {\n    bookmarksTweetsContext,\n    setBookmarksTweetsContext\n  } = useContext(BookmarksTweetsContext);\n  useEffect(() => {\n    if (user) {\n      if (!bookmarksTweetsContext) {\n        async function getSavedTweets() {\n          const localBMTweets = [];\n          const savesSnapShot = await firebase.firestore().collection(\"saves\").where(\"userID\", \"==\", user.uid).get();\n\n          if (savesSnapShot.empty) {\n            setIsEmpty(true);\n            setBookmarkTweets([]);\n            setIsLoading(false);\n          } else {\n            for (let i = 0; i < savesSnapShot.size; i++) {\n              const tweet = await fetchTweet(savesSnapShot.docs[i].data().tweetID);\n              localBMTweets.push(tweet);\n            }\n\n            setBookmarkTweets(localBMTweets);\n            setBookmarksTweetsContext(localBMTweets);\n            setIsEmpty(false);\n            setIsLoading(false);\n          }\n        }\n\n        getSavedTweets(user.uid);\n      } else {\n        setBookmarkTweets(bookmarksTweetsContext);\n        setIsEmpty(false);\n        setIsLoading(false);\n      }\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Bookmarks | Tweeter\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Layout, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-4 sm:mx-12 md:mx-24 lg:mx-24 mt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col lg:grid lg:grid-cols-3 lg:col-gap-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hidden lg:block lg:col-span-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-5\",\n              children: /*#__PURE__*/_jsxDEV(Filters, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2\",\n            children: [loading && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-center\",\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 75,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), isEmpty ? /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"You have no Saved Tweets\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 17\n            }, this) : bookmarkTweets.map(tweet => /*#__PURE__*/_jsxDEV(Link, {\n              href: `${tweet.author.username}/status/${tweet.id}`,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-5\",\n                children: /*#__PURE__*/_jsxDEV(Post, {\n                  tweet: tweet\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Bookmarks;","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/pages/bookmarks.jsx"],"names":["CircularProgress","Head","Link","useContext","useEffect","useState","Filters","Post","BookmarksTweetsContext","UserContext","firebase","Layout","fetchTweet","Bookmarks","user","bookmarkTweets","setBookmarkTweets","loading","setIsLoading","isEmpty","setIsEmpty","bookmarksTweetsContext","setBookmarksTweetsContext","getSavedTweets","localBMTweets","savesSnapShot","firestore","collection","where","uid","get","empty","i","size","tweet","docs","data","tweetID","push","map","author","username","id"],"mappings":";;AAAA,OAAOA,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,OAAOC,OAAP,MAAoB,+BAApB;AACA,OAAOC,IAAP,MAAiB,yBAAjB;AACA,OAAOC,sBAAP,MAAmC,mCAAnC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,SAASC,UAAT,QAA2B,uBAA3B;;AAEA,MAAMC,SAAS,GAAG,MAAM;AACtB,QAAM;AAAEC,IAAAA;AAAF,MAAWX,UAAU,CAACM,WAAD,CAA3B;AACA,QAAM;AAAA,OAACM,cAAD;AAAA,OAAiBC;AAAjB,MAAsCX,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM;AAAA,OAACY,OAAD;AAAA,OAAUC;AAAV,MAA0Bb,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM;AAAA,OAACc,OAAD;AAAA,OAAUC;AAAV,MAAwBf,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM;AAAEgB,IAAAA,sBAAF;AAA0BC,IAAAA;AAA1B,MAAwDnB,UAAU,CACtEK,sBADsE,CAAxE;AAIAJ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIU,IAAJ,EAAU;AACR,UAAI,CAACO,sBAAL,EAA6B;AAC3B,uBAAeE,cAAf,GAAgC;AAC9B,gBAAMC,aAAa,GAAG,EAAtB;AACA,gBAAMC,aAAa,GAAG,MAAMf,QAAQ,CACjCgB,SADyB,GAEzBC,UAFyB,CAEd,OAFc,EAGzBC,KAHyB,CAGnB,QAHmB,EAGT,IAHS,EAGHd,IAAI,CAACe,GAHF,EAIzBC,GAJyB,EAA5B;;AAMA,cAAIL,aAAa,CAACM,KAAlB,EAAyB;AACvBX,YAAAA,UAAU,CAAC,IAAD,CAAV;AACAJ,YAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAE,YAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,WAJD,MAIO;AACL,iBAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGP,aAAa,CAACQ,IAAlC,EAAwCD,CAAC,EAAzC,EAA6C;AAC3C,oBAAME,KAAK,GAAG,MAAMtB,UAAU,CAC5Ba,aAAa,CAACU,IAAd,CAAmBH,CAAnB,EAAsBI,IAAtB,GAA6BC,OADD,CAA9B;AAGAb,cAAAA,aAAa,CAACc,IAAd,CAAmBJ,KAAnB;AACD;;AACDlB,YAAAA,iBAAiB,CAACQ,aAAD,CAAjB;AACAF,YAAAA,yBAAyB,CAACE,aAAD,CAAzB;AACAJ,YAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,YAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF;;AACDK,QAAAA,cAAc,CAACT,IAAI,CAACe,GAAN,CAAd;AACD,OA3BD,MA2BO;AACLb,QAAAA,iBAAiB,CAACK,sBAAD,CAAjB;AACAD,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF;AACF,GAnCQ,EAmCN,CAACJ,IAAD,CAnCM,CAAT;AAqCA,sBACE;AAAA,4BACE,QAAC,IAAD;AAAA,6BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,eAIE,QAAC,MAAD;AAAA,6BACE;AAAK,QAAA,SAAS,EAAC,sCAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,mDAAf;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,+BAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,MAAf;AAAA,qCACE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF,eAME;AAAK,YAAA,SAAS,EAAC,eAAf;AAAA,uBACGG,OAAO,iBACN;AAAK,cAAA,SAAS,EAAC,qBAAf;AAAA,qCACE,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFJ,EAMGE,OAAO,gBACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADM,GAGNJ,cAAc,CAACwB,GAAf,CAAoBL,KAAD,iBACjB,QAAC,IAAD;AAAM,cAAA,IAAI,EAAG,GAAEA,KAAK,CAACM,MAAN,CAAaC,QAAS,WAAUP,KAAK,CAACQ,EAAG,EAAxD;AAAA,qCACE;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,uCACE,QAAC,IAAD;AAAM,kBAAA,KAAK,EAAER;AAAb;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,CATJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAJF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAoCD,CAlFD;;AAoFA,eAAerB,SAAf","sourcesContent":["import CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useContext, useEffect, useState } from \"react\";\nimport Filters from \"../components/Filters/Filters\";\nimport Post from \"../components/Post/Post\";\nimport BookmarksTweetsContext from \"../context/BookmarksTweetsContext\";\nimport UserContext from \"../context/UserContext\";\nimport firebase from \"../firebase/init\";\nimport Layout from \"../layouts\";\nimport { fetchTweet } from \"../services/FetchData\";\n\nconst Bookmarks = () => {\n  const { user } = useContext(UserContext);\n  const [bookmarkTweets, setBookmarkTweets] = useState([]);\n  const [loading, setIsLoading] = useState(true);\n  const [isEmpty, setIsEmpty] = useState(false);\n  const { bookmarksTweetsContext, setBookmarksTweetsContext } = useContext(\n    BookmarksTweetsContext\n  );\n\n  useEffect(() => {\n    if (user) {\n      if (!bookmarksTweetsContext) {\n        async function getSavedTweets() {\n          const localBMTweets = [];\n          const savesSnapShot = await firebase\n            .firestore()\n            .collection(\"saves\")\n            .where(\"userID\", \"==\", user.uid)\n            .get();\n\n          if (savesSnapShot.empty) {\n            setIsEmpty(true);\n            setBookmarkTweets([]);\n            setIsLoading(false);\n          } else {\n            for (let i = 0; i < savesSnapShot.size; i++) {\n              const tweet = await fetchTweet(\n                savesSnapShot.docs[i].data().tweetID\n              );\n              localBMTweets.push(tweet);\n            }\n            setBookmarkTweets(localBMTweets);\n            setBookmarksTweetsContext(localBMTweets);\n            setIsEmpty(false);\n            setIsLoading(false);\n          }\n        }\n        getSavedTweets(user.uid);\n      } else {\n        setBookmarkTweets(bookmarksTweetsContext);\n        setIsEmpty(false);\n        setIsLoading(false);\n      }\n    }\n  }, [user]);\n\n  return (\n    <div>\n      <Head>\n        <title>Bookmarks | Tweeter</title>\n      </Head>\n      <Layout>\n        <div className=\"mx-4 sm:mx-12 md:mx-24 lg:mx-24 mt-5\">\n          <div className=\"flex flex-col lg:grid lg:grid-cols-3 lg:col-gap-5\">\n            <div className=\"hidden lg:block lg:col-span-1\">\n              <div className=\"mb-5\">\n                <Filters />\n              </div>\n            </div>\n            <div className=\"lg:col-span-2\">\n              {loading && (\n                <div className=\"flex justify-center\">\n                  <CircularProgress />\n                </div>\n              )}\n              {isEmpty ? (\n                <h1>You have no Saved Tweets</h1>\n              ) : (\n                bookmarkTweets.map((tweet) => (\n                  <Link href={`${tweet.author.username}/status/${tweet.id}`}>\n                    <div className=\"mb-5\">\n                      <Post tweet={tweet} />\n                    </div>\n                  </Link>\n                ))\n              )}\n            </div>\n          </div>\n        </div>\n      </Layout>\n    </div>\n  );\n};\n\nexport default Bookmarks;\n"]},"metadata":{},"sourceType":"module"}