{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/components/FollowButton/FollowButton.jsx\";\nimport PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport UserContext from \"../../context/UserContext\";\nimport firebase from \"../../firebase/init\";\n\nconst FollowButton = ({\n  userID\n}) => {\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    0: isFollowing,\n    1: setIsFollowing\n  } = useState(false);\n  const {\n    0: connectionDocID,\n    1: setFollowingDocID\n  } = useState(\"\");\n\n  const startFollowing = () => {\n    if (!user) {\n      alert(\"You need to sign in for that\");\n      return;\n    }\n\n    const {\n      id\n    } = firebase.firestore().collection(\"connections\").add({\n      followerID: user.uid,\n      followeeID: userID\n    });\n    setFollowingDocID(id);\n    setIsFollowing(true);\n  };\n\n  const stopFollowing = () => {\n    if (!user) {\n      alert(\"You need to sign in for that\");\n      return;\n    }\n\n    firebase.firestore().collection(\"connections\").doc(connectionDocID).delete();\n    setIsFollowing(false);\n  };\n\n  useEffect(() => {\n    if (user) {\n      async function checkFollowing() {\n        const result = await firebase.firestore().collection(\"connections\").where(\"followeeID\", \"==\", userID).where(\"followerID\", \"==\", user.uid).get();\n\n        if (result.size === 1) {\n          setIsFollowing(true);\n          setFollowingDocID(result.docs[0].id);\n        }\n      }\n\n      checkFollowing();\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"lg:mr-0 lg:ml-auto bg-primary text-white px-2 py-4  lg:px-8 lg:py-4 rounded-md\",\n      type: \"submit\",\n      onClick: () => isFollowing ? stopFollowing() : startFollowing(),\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mx-2\",\n        children: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), isFollowing ? \"Following\" : \"Follow\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n};\n\nexport default FollowButton;","map":{"version":3,"sources":["/Users/matthewfrances/Documents/development/School/Winter2021/SOEN357/twitter-clone/src/components/FollowButton/FollowButton.jsx"],"names":["PersonAddIcon","React","useContext","useEffect","useState","UserContext","firebase","FollowButton","userID","user","isFollowing","setIsFollowing","connectionDocID","setFollowingDocID","startFollowing","alert","id","firestore","collection","add","followerID","uid","followeeID","stopFollowing","doc","delete","checkFollowing","result","where","get","size","docs"],"mappings":";;AAAA,OAAOA,aAAP,MAA0B,8BAA1B;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,QAAP,MAAqB,qBAArB;;AAEA,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAgB;AACnC,QAAM;AAAEC,IAAAA;AAAF,MAAWP,UAAU,CAACG,WAAD,CAA3B;AACA,QAAM;AAAA,OAACK,WAAD;AAAA,OAAcC;AAAd,MAAgCP,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM;AAAA,OAACQ,eAAD;AAAA,OAAkBC;AAAlB,MAAuCT,QAAQ,CAAC,EAAD,CAArD;;AAEA,QAAMU,cAAc,GAAG,MAAM;AAC3B,QAAI,CAACL,IAAL,EAAW;AACTM,MAAAA,KAAK,CAAC,8BAAD,CAAL;AACA;AACD;;AACD,UAAM;AAAEC,MAAAA;AAAF,QAASV,QAAQ,CAACW,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+CC,GAA/C,CAAmD;AAChEC,MAAAA,UAAU,EAAEX,IAAI,CAACY,GAD+C;AAEhEC,MAAAA,UAAU,EAAEd;AAFoD,KAAnD,CAAf;AAIAK,IAAAA,iBAAiB,CAACG,EAAD,CAAjB;AACAL,IAAAA,cAAc,CAAC,IAAD,CAAd;AACD,GAXD;;AAaA,QAAMY,aAAa,GAAG,MAAM;AAC1B,QAAI,CAACd,IAAL,EAAW;AACTM,MAAAA,KAAK,CAAC,8BAAD,CAAL;AACA;AACD;;AACDT,IAAAA,QAAQ,CACLW,SADH,GAEGC,UAFH,CAEc,aAFd,EAGGM,GAHH,CAGOZ,eAHP,EAIGa,MAJH;AAKAd,IAAAA,cAAc,CAAC,KAAD,CAAd;AACD,GAXD;;AAaAR,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIM,IAAJ,EAAU;AACR,qBAAeiB,cAAf,GAAgC;AAC9B,cAAMC,MAAM,GAAG,MAAMrB,QAAQ,CAC1BW,SADkB,GAElBC,UAFkB,CAEP,aAFO,EAGlBU,KAHkB,CAGZ,YAHY,EAGE,IAHF,EAGQpB,MAHR,EAIlBoB,KAJkB,CAIZ,YAJY,EAIE,IAJF,EAIQnB,IAAI,CAACY,GAJb,EAKlBQ,GALkB,EAArB;;AAMA,YAAIF,MAAM,CAACG,IAAP,KAAgB,CAApB,EAAuB;AACrBnB,UAAAA,cAAc,CAAC,IAAD,CAAd;AACAE,UAAAA,iBAAiB,CAACc,MAAM,CAACI,IAAP,CAAY,CAAZ,EAAef,EAAhB,CAAjB;AACD;AACF;;AACDU,MAAAA,cAAc;AACf;AACF,GAhBQ,EAgBN,CAACjB,IAAD,CAhBM,CAAT;AAkBA,sBACE;AAAA,2BACE;AACE,MAAA,SAAS,EAAC,gFADZ;AAEE,MAAA,IAAI,EAAC,QAFP;AAGE,MAAA,OAAO,EAAE,MAAOC,WAAW,GAAGa,aAAa,EAAhB,GAAqBT,cAAc,EAHhE;AAAA,8BAIE;AAAM,QAAA,SAAS,EAAC,MAAhB;AAAA,+BACE,QAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAJF,EAOGJ,WAAW,GAAG,WAAH,GAAiB,QAP/B;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CA9DD;;AAgEA,eAAeH,YAAf","sourcesContent":["import PersonAddIcon from \"@material-ui/icons/PersonAdd\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport UserContext from \"../../context/UserContext\";\nimport firebase from \"../../firebase/init\";\n\nconst FollowButton = ({ userID }) => {\n  const { user } = useContext(UserContext);\n  const [isFollowing, setIsFollowing] = useState(false);\n  const [connectionDocID, setFollowingDocID] = useState(\"\");\n\n  const startFollowing = () => {\n    if (!user) {\n      alert(\"You need to sign in for that\");\n      return;\n    }\n    const { id } = firebase.firestore().collection(\"connections\").add({\n      followerID: user.uid,\n      followeeID: userID,\n    });\n    setFollowingDocID(id);\n    setIsFollowing(true);\n  };\n\n  const stopFollowing = () => {\n    if (!user) {\n      alert(\"You need to sign in for that\");\n      return;\n    }\n    firebase\n      .firestore()\n      .collection(\"connections\")\n      .doc(connectionDocID)\n      .delete();\n    setIsFollowing(false);\n  };\n\n  useEffect(() => {\n    if (user) {\n      async function checkFollowing() {\n        const result = await firebase\n          .firestore()\n          .collection(\"connections\")\n          .where(\"followeeID\", \"==\", userID)\n          .where(\"followerID\", \"==\", user.uid)\n          .get();\n        if (result.size === 1) {\n          setIsFollowing(true);\n          setFollowingDocID(result.docs[0].id);\n        }\n      }\n      checkFollowing();\n    }\n  }, [user]);\n\n  return (\n    <div>\n      <button\n        className=\"lg:mr-0 lg:ml-auto bg-primary text-white px-2 py-4  lg:px-8 lg:py-4 rounded-md\"\n        type=\"submit\"\n        onClick={() => (isFollowing ? stopFollowing() : startFollowing())}>\n        <span className=\"mx-2\">\n          <PersonAddIcon />\n        </span>\n        {isFollowing ? \"Following\" : \"Follow\"}\n      </button>\n    </div>\n  );\n};\n\nexport default FollowButton;\n"]},"metadata":{},"sourceType":"module"}